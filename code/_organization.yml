db:
  image: postgres
  volumes_from:
    - db_data
  net: "backend_net"
  environment:
    - "constraint:node==$TARGET_NODE"
    - POSTGRES_PASSWORD=masterarbeit
    - POSTGRES_USER=organization_service
db_data:
  image: cogniteev/echo
  command: echo 'Data Container for PostgreSQL'
  net: "backend_net"
  volumes:
    - /var/lib/postgresql/datap
  environment:
    - "constraint:node==$TARGET_NODE"
service:
  image: $REGISTRY/organization_service
  command: /app/start
  net: "backend_net"
  volumes:
    - /var/run/docker.sock:/var/run/docker.sock
  ports:
    - "3000"
  environment:
    - "constraint:node==$TARGET_NODE"
    - POSTGRES_PASSWORD=masterarbeit
    - POSTGRES_USER=organization_service
    - SERVICE_NAME=organization_service
